// 【Stack主题鼠标样式写法】
// default光标图片
body,
html,
.article-content img:not(.code-less-img):not(.code-more-img),
.waline-container,
.wl-header label {
    cursor: url(../mouse/default.png),
        auto !important;
}

// pointer光标图片
a:hover,
button:hover,
.copyCodeButton:hover,
#dark-mode-toggle,
.wl-actions label,
.wl-actions a,
.wl-emoji-popup .wl-tab-wrapper button,
.wl-gif-popup img,
.wl-sort li,
.code-more-img,
.code-less-img {
    cursor: url(../mouse/pointer.png),
        auto !important;
}

// text光标图片
input:hover,
.site-description,
.article-subtitle,
.article-content span,
.article-content li,
.article-content p,
.wl-editor,
.wl-input,
.wl-header input,
[data-waline] p {
    cursor: url(../mouse/text.png),
        auto;
}

@media (min-width: 1024px) {
    .article-list--compact {
        display: grid;
        // 目前是两列，如需三列，则后面再加一个1fr，以此类推
        grid-template-columns: 1fr 1fr 1fr;
        background: none;
        box-shadow: none;
        gap: 1rem;

        article {
            background: var(--card-background);
            border: none;
            box-shadow: var(--shadow-l2);
            margin-bottom: 8px;
            margin-right: 8px;
            border-radius: 16px;
        }
    }
}

//头像动画效果（配合java）
[data-scheme="dark"] .sidebar header .site-avatar .site-logo {
    transition: transform 1.65s ease-in-out;

    // 旋转超调动画类
    &.rotating-overshoot {
        animation: rotateOvershoot 1s ease-in-out;
    }
}

[data-scheme="dark"] .sidebar header .site-avatar .site-logo:hover {
    transform: rotate(360deg);
}

// 定义旋转超调动画：旋转375度后归位
@keyframes rotateOvershoot {
    0% {
        transform: rotate(0deg);
    }

    80% {
        transform: rotate(375deg); // 旋转到375度（超调15度）
    }

    100% {
        transform: rotate(360deg); // 归位到360度
    }
}

// 折叠模块增加样式
details summary {
    cursor: url('/mouse/pointer.png'), pointer;
    color: var(--light-red);
    transition: all 0.3s ease-in-out;

    @media (hover: hover) and (pointer: fine) {

        //移动端去除hover效果
        &:hover {
            background: rgba(var(--link-background-color), var(--link-background-opacity-hover));
        }
    }
}

// 图片多列显示
.post-content p:has(> img:nth-child(2)) {
    column-count: 2;
    column-gap: 8px;
    margin: 6px 0;
}

.post-content p:has(> img:nth-child(3)) {
    column-count: 3;
}

.post-content p:has(> img:nth-child(4)) {
    column-count: 4;
}

.post-content p:has(> img:nth-child(5)) {
    column-count: 5;
}

.post-content p:has(> img:nth-child(6)) {
    column-count: 4;
}

.post-content p:has(> img:nth-child(2)) img {
    display: inherit;
}

.post-content p:has(> img:nth-child(6)) img {
    margin-bottom: 8px;
}

// // 图片居中
// p > img {
//     display: block;
//     margin: 0 auto;
//     max-width: 100%;
//     height: auto;
// }

// // 文章内容图片圆角阴影
// .article-page .main-article .article-content {
//   img {
//     max-width: 96% !important;
//     height: auto !important;
//     border-radius: 8px;
//   }
// }

//页面三栏宽度调整
.container {
    margin-left: auto;
    margin-right: auto;

    .left-sidebar {
        order: -3;
        max-width: var(--left-sidebar-max-width);
    }

    .right-sidebar {
        order: -1;
        max-width: var(--right-sidebar-max-width);

        /// Display right sidebar when min-width: lg
        @include respond(lg) {
            display: flex;
        }
    }

    &.extended {
        @include respond(md) {
            max-width: 1024px;
            --left-sidebar-max-width: 25%;
            --right-sidebar-max-width: 22% !important;
        }

        @include respond(lg) {
            max-width: 1280px;
            --left-sidebar-max-width: 20%;
            --right-sidebar-max-width: 30%;
        }

        @include respond(xl) {
            max-width: 1453px; //1536px;
            --left-sidebar-max-width: 15%;
            --right-sidebar-max-width: 25%;
        }
    }

    &.compact {
        @include respond(md) {
            --left-sidebar-max-width: 25%;
            max-width: 768px;
        }

        @include respond(lg) {
            max-width: 1024px;
            --left-sidebar-max-width: 20%;
        }

        @include respond(xl) {
            max-width: 1280px;
        }
    }
}

//全局页面小图片样式微调
.article-list--compact article .article-image img {
    width: var(--image-size);
    height: var(--image-size);
    object-fit: cover;
    border-radius: 17%;
}

// 页面基本配色
:root {
    // 全局顶部边距
    // --main-top-padding: 30px;
    // 全局卡片圆角
    // --card-border-radius: 25px;
    // 标签云卡片圆角
    --tag-border-radius: 8px;
    // 卡片间距
    --section-separation: 40px;
    // 全局字体大小
    // --article-font-size: 1.8rem;
    // 行内代码背景色
    // --code-background-color: #f8f8f8;
    // 行内代码前景色
    --code-text-color: var(--light-red);

    // 暗色模式下样式
    &[data-scheme="dark"] {
        // 行内代码背景色
        // --code-background-color: #ff6d1b17;
        // 行内代码前景色
        --code-text-color: var(--light-red);
    }
}

//文章封面高度更改
.article-list article .article-image img {
    width: 100%;
    height: 150px;
    object-fit: cover;

    @include respond(md) {
        height: 200px;
    }

    @include respond(xl) {
        height: 305px;
    }
}

// 设置选中字体的区域背景颜色
::selection {
    color: #fff;
    background: #b52e29aa;
}

// 代码块样式修改
// .highlight {
//     box-shadow: var(--shadow-pre);
// }

[data-scheme="light"] .article-content .highlight {
    background-color: #d9d9d9;
}

[data-scheme="light"] .chroma {
    background-color: #d9d9d9d8;
}

[data-scheme="dark"] .article-content .highlight {
    background-color: #212121;
}

[data-scheme="dark"] .chroma {
    background-color: #212121c5;
}

// 把代码块的高度限制在 20em，并隐藏滚动条
.article-content {

    // line 205
    .highlight {

        // line 331
        pre {
            // line 345
            // margin: initial;
            // margin: 0;
            // width: auto;
            // max-height: 17em;
            scrollbar-width: none;

            /* Firefox */
            &::-webkit-scrollbar {
                display: none;
                /* Chrome Safari */
            }
        }
    }
}

//一大堆悬停效果：文字红色加粗放大
#main-menu {

    //左边菜单
    li {
        &:hover a {
            transition: all 0.2s ease-in-out;
            color: var(--light-red);
            transform: scale(1.05);
            font-weight: bold;
            filter: drop-shadow(var(--dropshadow-light));
        }

        [data-scheme="dark"] & {
            &:hover {
                filter: drop-shadow(var(--dropshadow-dark));
            }
        }
    }
}

.menu-social {

    //社交图标
    svg {
        transition: all 0.2s ease-in-out;

        &:hover {
            stroke: var(--light-red);
            transform: scale(1.05);
            filter: drop-shadow(var(--dropshadow-light));
        }

        [data-scheme="dark"] & {
            &:hover {
                filter: drop-shadow(var(--dropshadow-dark));
            }
        }
    }
}

#dark-mode-toggle {

    //暗色模式按钮
    &:hover {

        span,
        svg {
            color: var(--light-red);
            transition: all 0.2s ease-in-out;
            transform: scale(1.05);
            font-weight: bold;
            stroke-width: 2;
            filter: drop-shadow(var(--dropshadow-light));
        }
    }

    [data-scheme="dark"] & {
        &:hover {
            filter: drop-shadow(var(--dropshadow-dark));
        }
    }
}

// 文章目录导航栏
.widget--toc li>a {
    transition: all 0.2s ease-in-out;
    display: inline-block;
}

/* 只对直接悬停的链接应用效果，不影响子级 */
.widget--toc li>a:hover {
    color: var(--light-red);
    font-weight: bold;
    transform: scale(1.05);
}

/* 活动项悬停时应用效果 */
.widget--toc .active-class>a:hover {
    /* 确保border-left保持原位置，不参与缩放 */
    transform-origin: left center;
}

.page-link {
    //页面页码栏（需要添加JavaScript代码实现当前页高亮）
    transition: all 0.2s ease-in-out;

    &.current.reset-style {
        font-weight: normal;
        background-color: var(--card-background);
        color: var(--card-text-color-secondary);
    }

    &:not(.current):hover {
        // 其他页面的悬停效果
        color: var(--light-red);
        background-color: var(--card-background-selected);
        transform: scale(1.05);
        font-weight: bold;
    }
}

.archives-year {

    //右侧栏归档
    a {
        span.year {
            transition: all 0.2s ease-in-out;
            transform-origin: left center;
        }

        &:hover {
            background-color: var(--card-background-selected);
            border-radius: var(--card-border-radius);

            span.year {
                color: var(--light-red) !important;
                transform: scale(1.05);
            }
        }
    }
}

.tagCloud-tags {

    //标签云（注释掉widgets.scss里标签云的悬停和动画效果）
    a {
        transition: all 0.2s ease-in-out;

        &:hover {
            box-shadow: inset 0 0 0 999px var(--card-background-selected), var(--shadow-l2);
            color: var(--light-red);
            font-weight: bold;
            transform: scale(1.05);
        }
    }
}

.search-form {
    //搜索框
    transition: all 0.5s ease-in-out;

    &:hover {
        svg {
            transform: scale(1.1);
            stroke-width: 2;
        }
    }
}

//首页文章列表卡片
.article-list article {
    transition: all 0.2s ease-in-out;

    img {
        transition: all 0.6s ease-in-out;
    }

    &:hover {
        box-shadow: inset 0 0 0 999px var(--card-background-selected), var(--shadow-l2);
        transform: scale(1.01);

        img {
            transform: scale(1.05);
        }
    }
}

.subsection-list {
    //归档栏分类卡片
    overflow: visible;

    article {
        transition: all 0.2s ease-in-out;

        img {
            transition: all 0.6s ease-in-out;
        }

        &:hover {
            transform: scale(1.03);
            box-shadow: inset 0 0 0 999px var(--card-background-selected), var(--shadow-l2);

            img {
                transform: scale(1.25);
            }
        }
    }
}

.article-list--compact article {
    //归档栏文章卡片
    transition: all 0.2s ease-in-out;

    &:hover {
        transform: scale(1.03);
        box-shadow: inset 0 0 0 999px var(--card-background-selected), var(--shadow-l2);
    }

    .article-image {
        img {
            mask: none;
        }
    }
}

.related-content {
    //相关文章
    overflow: visible;

    article {
        transition: all 0.2s ease-in-out;

        img {
            transition: all 0.6s ease-in-out;
        }

        &:hover {
            transform: scale(1.03);
            box-shadow: inset 0 0 0 999px var(--card-background-selected), var(--shadow-l2);

            img {
                transform: scale(1.15);
            }
        }
    }

    .article-image {
        img {
            mask: none;
        }
    }
}

// 代码块展开折叠按钮
.article-content {
    .code-more-btn, .code-less-btn {
        opacity: 0;
        transition: opacity 0.3s ease;
    }

    .highlight:hover {
        .code-more-btn, .code-less-btn {
            opacity: 1;
        }
    }
}


// 文章页脚版权链接图标大小调整
.article-footer {
    .article-copyright {
        a:link {
            svg {
                width: 12px;
                height: 12px;
                margin-top: 0.2rem;
            }
        }
    }
}

@media (max-width: 768px) {
    .article-footer {
        section {

            // 只针对直接子元素的 SVG，不包含嵌套的
            &>svg {
                width: 20px !important;
                height: 20px !important;
                min-width: 20px;
                min-height: 20px;
            }
        }
    }
}


// 隐藏一大堆滚动条
@media (min-width: 768px) {
    #TableOfContents,
    //导航栏
    #main-menu,
    //左侧菜单
    .wl-emoji-popup .wl-tab-wrapper,
    //评论区表情
    .wl-gallery,
    //评论区gif
    .wl-editor {
        //评论区主输入框
        scrollbar-width: none;
        /* Firefox */
        -ms-overflow-style: none;
        /* IE and Edge */
    }

    #TableOfContents::-webkit-scrollbar,
    #main-menu::-webkit-scrollbar,
    .wl-emoji-popup .wl-tab-wrapper::-webkit-scrollbar,
    .wl-gallery::-webkit-scrollbar,
    .wl-editor::-webkit-scrollbar {
        display: none;
        /* Chrome, Safari and Opera */
    }
}

//文章预览图渐变
.article-image {
    img {
        mask: linear-gradient(to bottom, black 0%, black 25%, rgba(0, 0, 0, 0.8) 40%, rgba(0, 0, 0, 0.4) 70%, transparent 100%);
    }
}

//副标题文字大小更改
.article-subtitle {
    font-size: 1.6rem;
    margin-top: 5px;
}

//扩大主页文章卡片可点击区域(java)，同步更改鼠标光标样式
.article-details {
    cursor: url('/mouse/pointer.png'), pointer;
}

// 分类标题页面小图片圆角
.section-card {
    img {
        border-radius: 17%;
    }
}

// //调整代码编号位置不影响代码缩进
// .chroma .ln {
//     display: inline-block;
//     margin: 0 !important;
//     width: 3em;
//     min-width: 3em;
//     box-sizing: border-box;
// }

// 代码块字体样式
code,
pre,
.highlight {
    font-weight: 300 !important;
    // font-size: 1.6rem;
}
//行内代码
.article-content code {
    border: none;
    border-radius: 4px ;
        font-size: 0.85em ;
}

// 代码块基础样式修改
.highlight {
    max-width: 100% !important;
    border-radius: 20px;
    margin: 0 !important;
    &:hover {
        box-shadow: var(--shadow-l1) !important;
    }
}
/* 移动端禁用折叠，启用滚动并限制高度 */
@media (max-width: 768px) {
    .highlight {
        overflow: auto !important;
        pre {
            max-height: 17em !important;
            &::-webkit-scrollbar {
                display: flex;
            }
        }
    }

    .code-more-box,
    .code-less-box {
        display: none !important;
    }
}

// 代码块标题样式
.highlight-with-title {
    position: relative;
    margin: 1rem 0;
    border-radius: 20px;
    overflow: hidden;
}
.highlight-with-title .highlight {
    padding-top: 4rem;
}
.highlight-with-title .copyCodeButton {
    top: calc(var(--card-padding) + 1.5rem);
}
.highlight-with-title::before {
    content: attr(data-title);
    position: absolute;
    left: 0;
    right: 0;
    color: var(--accent-color-text);
    opacity: 0.5;
    padding: 0 calc(2.5rem + 3em);
    background-color: var(--accent-color);
    font-size: 0.7em;
    font-family: 'Fira code', 'mkty';
    z-index: 1;
}

// 代码块复制按钮
.article-content .copyCodeButton {
    border-radius: 4px;
}

// 数学公式
.katex {
    color: var(--light-red);
    font-family: 'Fira Code', 'mkty', sans-serif !important;
    font-size: var(--article-font-size) !important;
}
// 斜体文字变暗变小
.article-content em {
    color: var(--body-text-color);
    font-size: 80%;
}
//表格标题红色背景
.article-content th {
    background-color: var(--light-red);
}
// 归档页分类框样式
.article-list--tile article.has-image .article-details {
    background-color: rgba(0, 0, 0, 0.2);
}
.article-list--tile article .article-image img {
    mask: none;
}
.subsection-list .article-list--tile article {
    width: 200px;
    height: 120px;
    border-radius: 16px;
    margin-right: 18px;
}
/* Place your custom SCSS in HUGO_SITE_FOLDER/assets/scss/custom.scss */