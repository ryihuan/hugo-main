<style>
    @font-face {
        font-family: 'mkty';
        src: url({{ (resources.Get "font/mkty.ttf").Permalink }}) format('truetype');
    }

    :root {
        --base-font-family: 'mkty';
        --code-font-family: 'mkty';
    }

    #TableOfContents > ul, ol {
        ul, ol {
            display: none;
        }
        .open {
            display: block;
        }
    }

    #backTopBtn {
        display: none;
        position: fixed;
        bottom: 20px;
        z-index: 99;
        cursor: url('/mouse/pointer.png'), pointer;
        width: 30px;
        height: 30px;
        transition: all 0.2s ease-in-out;
        background-color: var(--body-text-color);
        mask-image: url({{ (resources.Get "icons/top.svg").Permalink }});
        mask-repeat: no-repeat;
        mask-position: center;
        mask-size: 30px 30px;
    }

    #backTopBtn:hover {
        transform: scale(1.1);
        background-color: var(--light-red);
    }
    /*修改背景图片*/
    [data-scheme="light"] body {
        background: url({{ (resources.Get "background/light.jpg").Permalink }}) no-repeat center top;
        background-size: cover;
        background-attachment: fixed;
    }
    [data-scheme="dark"] body {
        background: url({{ (resources.Get "background/dark.jpg").Permalink }}) no-repeat center top;
        background-size: cover;
        background-attachment: fixed;
    }

</style>

<script>
function initTocHide() {
    // 判断是否存在文章目录
    let toc = document.querySelector(".widget--toc");
    if (!toc) {
        return;
    }
    // 监听滚动
    window.addEventListener('scroll', function() {
        //清除class值
        let openUl = document.querySelectorAll(".open");
        if (openUl.length > 0) {
            openUl.forEach((ul) => {
            ul.classList.remove("open")
            })
        }
        // 获取active-class
        let currentLi = document.querySelector(".active-class");
        if (!currentLi) {
            return
        }
        // 展示子ul
        if (currentLi.children.length > 1) {
            currentLi.children[1].classList.add("open")
        }
        // 展示父ul
        let ul = currentLi.parentElement;
        do {
            ul.classList.add("open");
            ul = ul.parentElement.parentElement
        } while (ul !== undefined && (ul.localName === 'ul' || ul.localName === 'ol'))
    });
}
initTocHide()

/*滚动回顶部初始化*/
    function initScrollTop() {
        let rightSideBar = document.querySelector(".right-sidebar");
        if (!rightSideBar) {
            return;
        }
        // 添加返回顶部按钮到右侧边栏
        let btn = document.createElement("div");
        btn.id = "backTopBtn";
        btn.onclick = backToTop
        rightSideBar.appendChild(btn)
        // 滚动监听
        window.onscroll = function() {
            // 当网页向下滑动 20px 出现"返回顶部" 按钮
            if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
                btn.style.display = "block";
            } else {
                btn.style.display = "none";
            }
        };
    }

    /*返回顶部*/
    function backToTop(){
        window.scrollTo({ top: 0, behavior: "smooth" })
    }

    initScrollTop();
</script>

<script>
     /* Add blog running time */
    let s1 = '2025-09-22'; //website start date
    s1 = new Date(s1.replace(/-/g, "/"));
    let s2 = new Date();
    let timeDifference = s2.getTime() - s1.getTime();

    let days = Math.floor(timeDifference / (1000 * 60 * 60 * 24));
    let hours = Math.floor((timeDifference % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    let minutes = Math.floor((timeDifference % (1000 * 60 * 60)) / (1000 * 60));

    let result = days + "天" + hours + "小时" + minutes + "分钟";
    document.getElementById('runningdays').innerHTML = result;
</script>

<script>
/* 页码栏分页悬停效果 */
document.addEventListener('DOMContentLoaded', function() {
    const pagination = document.querySelector('.pagination');
    const pageLinks = document.querySelectorAll('.page-link');
    let currentPage = document.querySelector('.page-link.current');

    pageLinks.forEach(link => {
        link.addEventListener('mouseenter', function() {
            // 如果悬停的不是当前页面
            if (!this.classList.contains('current') && currentPage) {
                currentPage.classList.add('reset-style');
            }
        });

        link.addEventListener('mouseleave', function() {
            // 恢复当前页面样式
            if (currentPage) {
                currentPage.classList.remove('reset-style');
            }
        });
    });
});
</script>