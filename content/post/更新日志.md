---
title: 你好，Stack主题
date: "2025-10-01"
tags: ["Stack", "Hugo", "博客装修"]
description: "Hugo Stack 主题装修历程分享"
draft: false
categories: ["diary"]
---
<small>*本文基于Stack版本3.31.0，部分代码使用AI完成*</small>

## 从Neopost到Stack
我觉得对于像我这样的代码白痴，一开始装修博客就去选冷门主题真的是走弯路了。用Neopost主题的时候遇到很多问题用搜索引擎都搜不到可以抄作业的答案，只能一个劲问ai然后一遍一遍试错……  
虽然看到博客一点一点有个样子了也比较有满足感，但是太折磨了，思来想去还是换了更多人用教程也更全的Stack主题。

在此感谢：
[莱特雷-Hugo Stack主题自定义更改](https://letere-gzj.github.io/hugo-stack/p/hugo/custom-stack-theme/)；
[树响集-Stack主题调整](https://donbro.vercel.app/p/daima/)；
[第三夏尔-Hugo Stack博客主题装修](https://thirdshire.com/series/hugo-stack-%E5%8D%9A%E5%AE%A2%E4%B8%BB%E9%A2%98%E8%A3%85%E4%BF%AE/)；
[Naive Koala-Hugo Stack 魔改美化](https://www.xalaok.top/post/stack-modify/)
[B1ain's Blog-hugo博客装修笔记](https://www.blain.top/categories/hugo/)

顺便截图纪念一下用Neopost主题时候的样子吧。<details><summary>展开图片</summary>
![Neopost](/p/neopost.png)
</details>

## 从默认字体到猫啃糖圆
没啥好说的，星屑同款字体，圆体的神,  
附上[字体网站链接](https://www.maoken.com/tangyuan)
## 背景图和头像
因为还是很喜欢原来做的像素动图风格，本打算沿用，但在Pintrest找了一晚上素材都没有找到很满意的背景图  
自己画了一下草图，先凑合用着吧（画不画完还是未知数）  
<small>画不来像素风所以整个风格都改了> < </small>

画布开得尽可能大了，姑且应用到网页上看看会多么影响加载速度（
### 切换与旋转效果
按照[教程](https://www.xalaok.top/post/stack-modify/#%E5%A4%B4%E5%83%8F%E6%97%8B%E8%BD%AC)添加了头像旋转效果，并加了浅色/暗色模式切换头像和背景图的功能，效果不错（就是图太草了）  

以下是我魔改的代码：  
<details>
<summary>暗色模式下头像旋转（主题目录\assets\scss\custom.scss）</summary>

```scss
// 头像旋转动画
[data-scheme="dark"] .sidebar header .site-avatar .site-logo {
  transition: transform 1.65s ease-in-out; // 旋转时间
}

[data-scheme="dark"] .sidebar header .site-avatar .site-logo:hover {
  transform: rotate(360deg); // 旋转角度为360度
}
```
</details>
<details>
<summary>切换背景图片（主题目录\layouts\partials\footer\custom.html）</summary>

```css
    /*修改背景图片*/
    [data-scheme="light"] body {
        background: url({{ (resources.Get "background/light.jpg").Permalink }}) no-repeat center top;
        background-size: cover;
        background-attachment: fixed;
    }
    [data-scheme="dark"] body {
        background: url({{ (resources.Get "background/dark.jpg").Permalink }}) no-repeat center top;
        background-size: cover;
        background-attachment: fixed;
    }
```
</details>
<details>
<summary>切换头像</summary>

先修改`主题目录\layouts\partials\head\custom.html`
```html
<script>
// 头像切换功能
function updateAvatar() {
  const avatarImg = document.querySelector('.site-avatar .site-logo');
  if (!avatarImg) return;
  
  const isDark = document.documentElement.getAttribute('data-scheme') === 'dark';
  const lightSrc = avatarImg.getAttribute('data-src-light') || avatarImg.src;
  const darkSrc = avatarImg.getAttribute('data-src-dark');
  
  if (darkSrc && isDark) {
    avatarImg.src = darkSrc;
  } else if (lightSrc && !isDark) {
    avatarImg.src = lightSrc;
  }
}

// 初始化
document.addEventListener('DOMContentLoaded', updateAvatar);

// 监听主题切换
new MutationObserver(function(mutations) {
  mutations.forEach(function(mutation) {
    if (mutation.attributeName === 'data-scheme') {
      setTimeout(updateAvatar, 50);
    }
  });
}).observe(document.documentElement, { attributes: true });
</script>
```
再修改`主题目录\layouts\partials\sidebar\left.html`（在`<header>`后修改，注释掉原有设置）
```html
<header>
    {{ with .Site.Params.sidebar.avatar }}
        {{ if (default true .enabled) }}
        <figure class="site-avatar">
            <a href="{{ .Site.BaseURL | relLangURL }}">
            {{ if not .local }}
                <img src="{{ .src }}" width="300" height="300" class="site-logo" loading="lazy" alt="Avatar"
                    {{ with .srcDark }}data-src-dark="{{ . }}"{{ end }}>
            {{ else }}
                {{ $avatar := resources.Get (.src) }}
                {{ $avatarDark := resources.Get (.srcDark | default .src) }}
                
                {{ if and $avatar $avatarDark }}
                    {{ $avatarResized := $avatar.Resize "300x" }}
                    {{ $avatarDarkResized := $avatarDark.Resize "300x" }}
                    <img src="{{ $avatarResized.RelPermalink }}" 
                        data-src-light="{{ $avatarResized.RelPermalink }}"
                        data-src-dark="{{ $avatarDarkResized.RelPermalink }}"
                        width="{{ $avatarResized.Width }}" 
                        height="{{ $avatarResized.Height }}" 
                        class="site-logo" 
                        loading="lazy" 
                        alt="Avatar">
                {{ else if $avatar }}
                    {{ $avatarResized := $avatar.Resize "300x" }}
                    <img src="{{ $avatarResized.RelPermalink }}" 
                        width="{{ $avatarResized.Width }}"
                        height="{{ $avatarResized.Height }}" 
                        class="site-logo" 
                        loading="lazy" 
                        alt="Avatar">
                {{ else }}
                    {{ errorf "Failed loading avatar from %q" . }}
                {{ end }}
            {{ end }}
            </a>
            {{ with $.Site.Params.sidebar.emoji }}
                <span class="emoji">{{ . }}</span>
            {{ end }}
        </figure>
        {{ end }}
    {{ end }}
```
再在`hugo.yaml`的`sidebar`里面添加`srcdark: img/dark.jpg`
```yaml
    sidebar:
        emoji: 😨
        subtitle: Lorem ipsum dolor sit amet, consectetur adipiscing elit.
        avatar:
            enabled: true
            local: true
            src: img/light.jpg
            srcdark: img/dark.jpg
```
</details>

顺说目前的回顶部按钮和鼠标光标是用neopost主题的时候自己画的，我很满意^ ^  
<img src="/p/backtop.png" alt="回顶部" width=32px />![默认](/p/default.png)![点击](/p/pointer.png)![文本](/p/text.png)  
不过考虑到风格不匹配大概还要重画一个……

## 更换头像下图标链接
苦于没找到合适的图标素材，自己摸索了一个可以制作出完美适配主题下其他现有图标的办法

先看我做好的图标：![Misskey](/p/misskey.svg)![bluesky](/p/bluesky.svg) <small>（这样看起来两个线条粗细不太一致，我也没找到原因，但没关系，最终显示效果是差不多的就行……如果有谁知道为什么，请务必告诉我）</small>  
![效果](/p/效果.png)  

如果有同款需要，可以直接右键上面的图标另存^ ^

### 寻找svg素材
这里有一个很全的资源网站：[维基共享资源](https://commons.wikimedia.org/wiki/%E9%A6%96%E9%A1%B5?uselang=zh-cn)  
搜索你需要的logo，比如“bluesky”，选择`图像-文件类型-svg`，选择合适的logo并在下载时选择`full resolution`，这样我们就能得到一张初始的svg文件：  
<details><summary>展开图像</summary>

![bluesky](/p/初始-bluesky.svg)
</details>

### 编辑svg文件
使用编辑工具对svg文件进行编辑，这里我用的是[一个免费的在线svg编辑工具（需要注册）](https://boxy-svg.com/)

主要需要做的是先把view box调到24x24像素，再把图像调整到view box范围内，四周适当留出2px左右的空白（视具体图像而定），之后就可以保存了  
<details><summary>展开图像</summary>  
<img src=/p/100201.png alt="调整view box" width=100% /> <img src=/p/100202.png alt=调整图像 width=100% /></details>

把保存的svg文件在VScode里打开，默认会显示图像预览，需要在右上角找到`作为源文本重新打开`按钮，查看源文本  
为了跟主题原有的图标协调，这里我同时打开了`主题目录\assets\icons\brand-twitter.svg`的源文本进行比对：
<details><summary>brand-twitter.svg</summary>

```svg
<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M22 4.01c-1 .49 -1.98 .689 -3 .99c-1.121 -1.265 -2.783 -1.335 -4.38 -.737s-2.643 2.06 -2.62 3.737v1c-3.245 .083 -6.135 -1.395 -8 -4c0 0 -4.182 7.433 4 11c-1.872 1.247 -3.739 2.088 -6 2c3.308 1.803 6.913 2.423 10.034 1.517c3.58 -1.04 6.522 -3.723 7.651 -7.742a13.84 13.84 0 0 0 .497 -3.753c-.002 -.249 1.51 -2.772 1.818 -4.013z" />
</svg>
```
</details>

可以直接复制前面两行代码粘贴到正在修改的svg文件中：
<details><summary>未编辑的svg文件源文本</summary>

![图像](/p/Untitled.svg)
```svg
<?xml version="1.0" encoding="utf-8"?>
<svg width="24px" height="24px" version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
  <path d="M 6.307 4.451 C 8.615 6.202 11.099 9.759 12.012 11.668 C 12.923 9.76 15.407 6.202 17.717 4.451 C 19.383 3.185 22.083 2.207 22.083 5.321 C 22.083 5.944 21.73 10.549 21.524 11.294 C 20.804 13.893 18.184 14.557 15.854 14.155 C 19.928 14.858 20.964 17.179 18.726 19.501 C 14.477 23.912 12.618 18.395 12.14 16.981 C 12.054 16.722 12.012 16.6 12.012 16.703 C 12.012 16.6 11.97 16.722 11.882 16.981 C 11.407 18.395 9.547 23.912 5.297 19.501 C 3.059 17.179 4.095 14.858 8.17 14.155 C 5.837 14.557 3.219 13.893 2.499 11.294 C 2.294 10.549 1.94 5.944 1.94 5.321 C 1.94 2.207 4.64 3.185 6.307 4.451 Z" style="transform-box: fill-box; transform-origin: 50% 50%;" fill="#000"/>
</svg>
```
</details>

注意删除正在修改的文件`<path>`末尾的样式（如`style=""`、`fill=""`、`stroke=""`等等，总之只保留前面一连串看不懂的数字）
<details><summary>编辑后的源文本</summary>

![图像](/p/bluesky2.svg)
```svg
<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-bluesky" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M 6.307 4.451 C 8.615 6.202 11.099 9.759 12.012 11.668 C 12.923 9.76 15.407 6.202 17.717 4.451 C 19.383 3.185 22.083 2.207 22.083 5.321 C 22.083 5.944 21.73 10.549 21.524 11.294 C 20.804 13.893 18.184 14.557 15.854 14.155 C 19.928 14.858 20.964 17.179 18.726 19.501 C 14.477 23.912 12.618 18.395 12.14 16.981 C 12.054 16.722 12.012 16.6 12.012 16.703 C 12.012 16.6 11.97 16.722 11.882 16.981 C 11.407 18.395 9.547 23.912 5.297 19.501 C 3.059 17.179 4.095 14.858 8.17 14.155 C 5.837 14.557 3.219 13.893 2.499 11.294 C 2.294 10.549 1.94 5.944 1.94 5.321 C 1.94 2.207 4.64 3.185 6.307 4.451 Z" style="transform-box: fill-box; transform-origin: 50% 50%;" />
</svg>
```
</details>

这样一个适配主题的svg图标就做好了。  
### 应用到主页
把做好的文件放到`主题目录\assets\icons\`中，并在`hugo/yaml`里修改`menu-social-icon`的设置（与文件的标题一致），这样就可以应用到博客页面上了  
如果需要更改图标链接的顺序，在`params:`前面一行添加`weight: 数字`即可，数字越小则越前
## 添加文章封面渐变效果
参考了[田八-使用CSS让图片透明渐变](https://juejin.cn/post/7115236719019950088)中第三种方法的代码。
<details><summary>效果预览</summary>

![1](/p/100301.png)
</details>

将以下代码添加到`custom.scss`中即可：
```scss
//文章预览图渐变
.article-image {
  img {
  mask: linear-gradient(to bottom, black 0%, black 25%, rgba(0, 0, 0, 0.8) 40%, rgba(0, 0, 0, 0.4) 70%, transparent 100%);  }
}
```
## 为元素添加鼠标悬停效果
### 代码是什么，可以吃吗？
**先说题外话，** 装修过程中渐渐学会了用开发者工具、定位css文件中的元素位置、简单修改悬停效果和添加动画……这之前我真是一窍不通  
我是小白，所以把这个过程分享出来，希望能帮助到跟我小白程度一样的人吧。

我一开始还是各种问ai，但ai给出的方案实际上也是它海量检索资料然后缝合的，如果提问的方式不正确，它很难给出跟实际情况适配的答案。  
遇到问题时还是先谷歌搜寻一下，比如我想要上面提到的文章封面渐变效果，先用搜索引擎搜索“CSS 图片渐变”，找到了别人分享的实际内容，再去问ai是否可以应用到我的案例上、如果我需要为透明度添加中间值应该怎么做。这样可以提升效率，而不是在ai给出的海量错误代码中迷失。

学会使用开发者工具检查元素，查看元素的class属性。  
用vscode的资源管理器打开主题文件夹，再在`style.scss`给出的文件列表里一个一个`ctrl+F`查找该属性，这样就能很快锁定这个元素的样式代码。  
通常建议不要直接在原文件上进行修改，应该在`custom.scss`中添加代码。
### 案例：左侧菜单栏悬停效果
以下是实现左侧菜单栏悬停效果的具体案例：  
1. 用F12定位元素属性  
  选择左侧菜单栏中的元素，可以很清楚地看到`class="menu" id="main-menu"`

2. 查找元素的样式代码  
  可以在`menu.scss`中找到`#main-menu`关键词，以下是它相关的所有样式代码
```css
/* Menu style */
#main-menu {
    list-style: none;
    overflow-y: auto;
    flex-grow: 1;
    font-size: 1.4rem;
    background-color: var(--card-background);

    box-shadow: var(--shadow-l1);
    display: none;
    margin: 0 calc(var(--container-padding) * -1);

    padding: 30px 30px;

    @include respond(xl) {
        padding: 15px 0;
    }

    &, .menu-bottom-section ol {
        flex-direction: column;
        gap: 30px;

        @include respond(xl) {
            gap: 25px;
        }
    }

    &.show {
        display: flex;
    }

    @include respond(md) {
        align-items: flex-end;
        display: flex;
        background-color: transparent;
        padding: 0;
        box-shadow: none;
        margin: 0;
    }

    li {
        position: relative;
        vertical-align: middle;
        padding: 0;

        @include respond(md) {
            width: 100%;
        }

        svg {
            stroke: currentColor;
            stroke-width: 1.33;
            width: 20px;
            height: 20px;
        }

        a {
            height: 100%;
            display: inline-flex;
            align-items: center;
            color: var(--body-text-color);
            gap: var(--menu-icon-separation);
        }

        span {
            flex: 1;
        }

        &.current {
            a {
                color: var(--accent-color);
                font-weight: bold;
            }
        }

        &.menu-bottom-section {
            margin-top: auto;

            ol {
                display: flex;
                padding-left: 0;
            }
        }
    }
}
```
3. 在`custom.scss`中添加样式  
  这是我为实现左侧菜单栏悬停后变色并加粗放大和添加阴影效果（并做暗色模式区分）而写的代码：
```css
#main-menu { //左边菜单
  li {
    &:hover a{
      transition: all 0.2s ease-in-out;
      color: var(--light-red);
      transform: scale(1.05);
      font-weight: bold;
      filter: drop-shadow(var(--dropshadow-light));
    }

    [data-scheme="dark"] & {
      &:hover {
        filter: drop-shadow(var(--dropshadow-dark));
      }
    }
  }
}
```
对于像我这样的小白来说，写悬停效果只需要学会写`:hover`（悬停状态）、`transition`（动画效果）、`transform`（变形）这些很简单的代码，并学会看原样式代码的层级结构就可以了。  

如果写的代码效果与预期不一致，或者报错，此时再把已经写好的代码和原本的样式代码贴给ai让它进行修改，比什么都不做就茫然地向ai求助更有效率。

我为我的博客写了一大堆悬停效果，因为它最简单也最容易提升博客阅读体验。<small>（当然，移动端看不了鼠标悬停效果= =  </small>

全部的代码就不放出了，总之基本上都是重复上述案例的步骤，不同的元素根据它原有样式的不同可能会有差分  
<small>如果需要实现复杂的功能效果，可能需要编辑`layouts/partials/footer/custom.html`这个文件，这就涉及我知识盲区了> < </small>

## 页码栏鼠标悬停效果
因为有点复杂，java部分借助了ai

效果预览：    
![1](/p/页码栏.gif)

这个效果拆分为：
1. 当前页码高亮（stack自带）
2. 鼠标悬停在非当前页码时高亮（会写上面的代码就会写这个），同时当前页码变回默认样式
3. 鼠标悬停在当前页码时不发生改变

实现这一效果的代码：
1. 编辑`custom.scss`
```css
.page-link { //页面页码栏（需要添加JavaScript代码实现当前页高亮）
  transition: all 0.2s ease-in-out;

  &.current.reset-style {
    font-weight: normal;
    background-color: var(--card-background);
    color: var(--card-text-color-secondary);
  }
  &:not(.current):hover { // 其他页面的悬停效果
    color: var(--light-red);
    background-color: var(--card-background-selected);
    transform: scale(1.05);
    font-weight: bold;
  }
}
```
2. 编辑`custom.html`
```javascript
<script>
/* 页码栏分页悬停效果 */
document.addEventListener('DOMContentLoaded', function() {
    const pagination = document.querySelector('.pagination');
    const pageLinks = document.querySelectorAll('.page-link');
    let currentPage = document.querySelector('.page-link.current');

    pageLinks.forEach(link => {
        link.addEventListener('mouseenter', function() {
            // 如果悬停的不是当前页面
            if (!this.classList.contains('current') && currentPage) {
                currentPage.classList.add('reset-style');
            }
        });

        link.addEventListener('mouseleave', function() {
            // 恢复当前页面样式
            if (currentPage) {
                currentPage.classList.remove('reset-style');
            }
        });
    });
});
</script>
```
## 更改主页文章卡片可点击区域
Stack主题中，主页的文章卡片的默认点击区域只有文章标题区域，  
以下这些代码可以把点击打开文章的区域更改为除分类标签以外的所有区域。

在`custom.html`中添加：
```javascript
<!-- 扩大主页文章卡片可点击区域 -->
<script>
document.addEventListener('click', function(e) {
    const articleDetails = e.target.closest('.article-details');
    if (articleDetails && !e.target.closest('.article-category a')) {
        const titleLink = articleDetails.querySelector('.article-title a');
        if (titleLink) {
            window.location.href = titleLink.href;
        }
    }
});
</script>
```

在`custom.scss`中添加：
```css
//扩大主页文章卡片可点击区域(java)，同步更改鼠标光标样式
.article-details {
  cursor: url('/mouse/pointer.png'), pointer;
}
```
如果没有自定义鼠标样式，去掉url的部分就好了。

<small>*未完待续？*</small>

